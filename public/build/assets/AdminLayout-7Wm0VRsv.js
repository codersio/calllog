import{q as O,r as i,j as e,a as s}from"./app-BV8Hs2DA.js";import"./Dropdown-4iDllGMy.js";import{I as M,a as P,b as A,c as l,d as E,e as u,f as p,g as j,h as f,i as g,j as L,k as T,F,l as D,m as B,n as G,o as $,p as q,R as Q,L as U}from"./index-B8hqPStr.js";import{F as W}from"./index-BfhOz7Dm.js";function Z({header:X,children:v,notif:c,user_type:H}){const{props:a}=O(),[r,N]=i.useState([]);i.useEffect(()=>{Array.isArray(a.auth.permissions)&&N(a.auth.permissions)},[a]),i.useState(!1);const[x,b]=i.useState(!1),[d,w]=i.useState(!1);i.useState(!1);const[h,y]=i.useState(!1);i.useState(!1);const z=t=>{t.stopPropagation(),o(n=>!n),m(!1)},S=t=>{t.stopPropagation(),m(n=>!n),o(!1)},k=i.useRef(null),[C,m]=i.useState(!1),_=i.useRef(null),[I,o]=i.useState(!1),R=async t=>{try{await axios.post(`readta/${t}`),setUnreadCount(n=>Math.max(n-1,0))}catch(n){console.error("Error marking notification as read",n)}};return e.jsxs("div",{className:"fixed w-full h-full left-0 top-0 flex",children:[e.jsx("div",{ref:_,className:`fixed top-0 z-30 right-0 left-0 flex justify-end w-full h-full bg-black/30 backdrop-blur-sm transition-all duration-300 ${I?"opacity-100 pointer-events-auto":"opacity-0 delay-300 pointer-events-none"}`,children:e.jsxs("div",{className:"bg-white scrollbar-thumb-sky-700 scrollbar-track-white",children:[e.jsxs("div",{className:"flex items-center justify-between px-2 py-3",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Notifications"}),e.jsx("button",{onClick:z,children:e.jsx(W,{size:16})})]}),e.jsx("div",{className:"h-[30rem] w-[20rem] space-y-3 overflow-y-scroll bg-white scrollbar-thin scrollbar-thumb-sky-700 scrollbar-track-white",children:c==null?void 0:c.map(t=>e.jsxs("a",{onClick:()=>R(t.id),href:t.data.url,className:"flex items-center w-full p-2.5 gap-x-4 hover:bg-gray-100 shadow-md shadow-gray-200 rounded",children:[e.jsx("div",{className:"border border-gray-200 p-1.5 rounded-full",children:e.jsx(BiTask,{size:18,className:"text-green-500"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800",children:t.data.project}),e.jsx("span",{className:"font-semibold text-blue-500",children:t.data.employee_id}),e.jsx("span",{className:"text-sm text-gray-700",children:t.data.message})]}),!t.read_at&&e.jsx("span",{className:"bg-red-500 w-1.5 h-1.5 rounded-full ml-auto"})]},t.id))}),e.jsx("div",{className:"p-5",children:e.jsxs(s,{href:"/notifications-get",className:"flex items-center justify-center w-full py-2 text-sm text-center text-white bg-blue-500 rounded",children:[e.jsx(M,{className:"text-[1.5rem]"}),e.jsx("span",{children:"See All Notifications"})]})})]})}),e.jsxs("aside",{className:"w-64 h-full flex flex-col border-r border-gray-300",children:[e.jsx("div",{className:"flex justify-center pt-2",children:e.jsx("img",{width:130,src:"/logo/logo2.jpg",alt:""})}),e.jsxs("ul",{className:"p-4 flex-1 overflow-y-auto custom-scrollbar space-y-2",children:[e.jsx("li",{children:e.jsxs(s,{href:"/dashboard",className:"flex items-center p-3 text-white rounded gap-x-1 bg-rose-500",children:[e.jsx(P,{size:15}),e.jsx("span",{className:"text-sm",children:"Dashboard"})]})}),e.jsx("li",{children:e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>y(!h),className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white w-full",children:[e.jsx(A,{size:15}),e.jsx("span",{className:"text-sm",children:"Master"})]}),h&&e.jsxs("ul",{className:"ml-4 space-y-2",children:[e.jsx("li",{children:e.jsxs(s,{href:"/tasktype",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Task Type"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/interval",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Interval"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/tax",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Tax"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/purchase",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Purchase"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/stocks",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Stock"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/distributers",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Distributor"})]})})]})]})}),a.auth.user.roles[0].name==="admin"||r.includes("view_dealer")?e.jsx("li",{children:e.jsxs(s,{href:"/delars",className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white",children:[e.jsx(E,{size:15}),e.jsx("span",{className:"text-sm",children:"Dealer"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_service_center")?e.jsx("li",{children:e.jsxs(s,{href:"/service-centers",className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white",children:[e.jsx(u,{size:15}),e.jsx("span",{className:"text-sm",children:"Service Center"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_spare_parts")?e.jsx("li",{children:e.jsxs(s,{href:"/spare-part",className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white",children:[e.jsx(p,{size:15}),e.jsx("span",{className:"text-sm",children:"Spare & Parts"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_call_allocation")?e.jsx("li",{children:e.jsxs(s,{href:"/Call-Allocation",className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white",children:[e.jsx(j,{size:15}),e.jsx("span",{className:"text-sm",children:"Call Allocation"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_extended_warranty")?e.jsx("li",{children:e.jsxs(s,{href:"/Warranty-Extend",className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white",children:[e.jsx(f,{size:15}),e.jsx("span",{className:"text-sm",children:"Extened Warrenty"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_client")?e.jsx("li",{children:e.jsxs(s,{href:"/Client",className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white",children:[e.jsx(g,{size:15}),e.jsx("span",{className:"text-sm",children:"Client"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_employee")?e.jsx("li",{children:e.jsxs(s,{href:"/Employee",className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white",children:[e.jsx(g,{size:15}),e.jsx("span",{className:"text-sm",children:"Employees"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_product")?e.jsx("li",{children:e.jsxs(s,{href:"/Product-List",className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white",children:[e.jsx(L,{size:15}),e.jsx("span",{className:"text-sm",children:"Products"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_quotation")?e.jsx("li",{children:e.jsxs(s,{href:"/Quotation",className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white",children:[e.jsx(T,{size:15}),e.jsx("span",{className:"text-sm",children:"Quotation"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_services")?e.jsx("li",{children:e.jsxs(s,{href:"/services",className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white",children:[e.jsx(u,{size:15}),e.jsx("span",{className:"text-sm",children:"Services"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_sales")?e.jsx("li",{children:e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>b(!x),className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white w-full",children:[e.jsx(j,{size:15}),e.jsx("span",{className:"text-sm",children:"Sales"})]}),x&&e.jsxs("ul",{className:"ml-4 space-y-2",children:[e.jsx("li",{children:e.jsxs(s,{href:"/sales",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Bill"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/amc-expense-index",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Expense"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/income",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Income"})]})})]})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_amc")?e.jsx("li",{children:e.jsxs(s,{href:"/amc",className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white",children:[e.jsx(p,{size:15}),e.jsx("span",{className:"text-sm",children:"AMC"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_complaint")?e.jsx("li",{children:e.jsxs(s,{href:"/complaint",className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white",children:[e.jsx(f,{size:15}),e.jsx("span",{className:"text-sm",children:"Complaint"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_task")?e.jsx("li",{children:e.jsxs(s,{href:"/tasks",className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white",children:[e.jsx(F,{size:15}),e.jsx("span",{className:"text-sm",children:"Tasks"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_report")?e.jsx("li",{children:e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>w(!d),className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white w-full",children:[e.jsx(D,{size:15}),e.jsx("span",{className:"text-sm",children:"Reports"})]}),d&&e.jsxs("ul",{className:"ml-4 space-y-2",children:[e.jsx("li",{children:e.jsxs(s,{href:"/complaint-reports",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Complaint Reports"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/sales-reports",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Sales Report"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/service-reports",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Service Reports"})]})})]})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_role")?e.jsx("li",{children:e.jsxs(s,{href:"/roles-permission-details",className:"flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white",children:[e.jsx(B,{size:15}),e.jsx("span",{className:"text-sm",children:"Roles & Permissions"})]})}):""]})]}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsxs("nav",{className:"flex items-center justify-between w-full p-3 px-6 border-b border-gray-300",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx("button",{onClick:t=>o(!0),className:"p-2 bg-gray-300 rounded",children:e.jsx(G,{size:15})}),e.jsx("button",{className:"p-2 bg-gray-300 rounded",children:e.jsx($,{size:15})}),e.jsxs("div",{className:"flex space-x-2 cursor-pointer",onClick:S,children:[e.jsx("span",{className:"grid place-items-center",children:e.jsx(q,{className:"text-[1.5rem]"})}),e.jsx("span",{className:"text-[1rem]",children:a.auth.user.name})]}),e.jsx("div",{className:"relative grid place-items-center",children:e.jsx("div",{ref:k,className:`absolute top-full p-4 -right-5 my-5 border border-gray-300 rounded w-[10rem] bg-white shadow-lg transition-all duration-300 shadow-zinc-800/50 ${C?"opacity-100 pointer-events-auto translate-y-0":"opacity-0 pointer-events-none translate-y-14"}`,children:e.jsx("div",{children:e.jsx("li",{className:"p-2 text-black list-none",children:e.jsxs(Q,{method:"post",href:route("logout"),as:"button",className:"flex space-x-2",children:[e.jsx("span",{className:"grid mt-1 place-items-center",children:e.jsx(U,{})}),e.jsx("span",{children:"Log Out"})]})})})})})]})]}),e.jsx("div",{className:"flex-1 h-full p-4 overflow-y-auto",children:v})]})]})}export{Z as A};
