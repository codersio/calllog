import{W as X,r as n,j as e}from"./app-CwTpoyqh.js";import{N as L}from"./notyf.min-DLu_xjpT.js";import{A as I}from"./AdminLayout-DQmQe51a.js";import{R as $}from"./quill.snow-BVnMepUo.js";import"./Dropdown-C_Ing8xx.js";import"./index-DXOuEoXo.js";import"./index-CBtgs9-R.js";const r=new L,Y=({client_idf2:E})=>{const{data:o,setData:p,post:T,processing:g,errors:s}=X({product_id:E.value,item_name:"",model_no:"",brand:"",product_category:"male",price:"",unit:"",image:"",product_desc:""}),[m,h]=n.useState([]),[u,b]=n.useState([]),[x,y]=n.useState([]),[w,A]=n.useState(!1),[C,F]=n.useState(!1),[v,P]=n.useState(!1),[f,_]=n.useState(""),[j,S]=n.useState(""),[N,k]=n.useState("");n.useEffect(()=>{const t=async()=>{try{const i=await(await fetch("/brands")).json();h(i)}catch{r.error("Failed to load brands")}},a=async()=>{try{const i=await(await fetch("/categories")).json();b(i)}catch{r.error("Failed to load categories")}},l=async()=>{try{const i=await(await fetch("/unit")).json();y(i)}catch{r.error("Failed to load units")}};t(),a(),l()},[]);const U=t=>{p("image",t.target.files[0])},d=t=>{p(t.target.name,t.target.value)},B=t=>{t.preventDefault(),T("/Product-List/",{onSuccess:()=>{r.success("Product added successfully!")},onError:()=>{r.error("Failed to add product. Please check your inputs.")}})},D=async()=>{if(f)try{const t=await fetch("/brands",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({name:f})});if(t.ok){const a=await t.json();h([...m,a]),_(""),r.success("Brand added successfully")}else r.error("Failed to add brand")}catch{r.error("Error adding brand")}},M=async t=>{try{(await fetch(`/brands/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).ok?(h(m.filter(l=>l.cat_id!==t)),r.success("Brand removed successfully")):r.error("Failed to delete brand")}catch{r.error("Error deleting brand")}},O=async()=>{if(j)try{const t=await fetch("/categories",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({name:j})});if(t.ok){const a=await t.json();b([...u,a]),S(""),r.success("Category added successfully")}else r.error("Failed to add category")}catch{r.error("Error adding category")}},R=async t=>{try{(await fetch(`/categories/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).ok?(b(u.filter(l=>l.cat_id!==t)),r.success("Category removed successfully")):r.error("Failed to delete category")}catch{r.error("Error deleting category")}},q=async()=>{if(N)try{const t=await fetch("/unit",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({name:N})});if(t.ok){const a=await t.json();y([...x,a]),k(""),r.success("Unit added successfully")}else r.error("Failed to add unit")}catch{r.error("Error adding unit")}},K=async t=>{try{(await fetch(`/unit/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).ok?(y(x.filter(l=>l.cat_id!==t)),r.success("Unit removed successfully")):r.error("Failed to delete unit")}catch{r.error("Error deleting unit")}};return e.jsx(I,{children:e.jsxs("div",{className:"max-w-4xl p-8 mx-auto bg-white rounded-lg shadow-md",children:[e.jsx("h2",{className:"mb-6 text-2xl font-bold text-gray-800",children:"Add Product"}),e.jsx("h2",{className:"mb-1 text-2xl font-bold text-gray-600",children:"Product Information"}),e.jsxs("form",{onSubmit:B,className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Product ID"}),e.jsx("input",{type:"text",name:"product_id",readOnly:!0,value:o.product_id,onChange:d,className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Enter Product Id"}),s.product_id&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.product_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Item Name"}),e.jsx("input",{type:"text",name:"item_name",value:o.item_name,onChange:d,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Item Name"}),s.item_name&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.item_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Model Number"}),e.jsx("input",{type:"text",name:"model_no",value:o.model_no,onChange:d,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Model Number"}),s.model_no&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.model_no})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Brand"}),e.jsxs("select",{name:"brand",value:o.brand,onChange:d,className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select a brand"}),m.map(t=>e.jsx("option",{value:t.cat_id,children:t.title},t.cat_id))]}),s.brand&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.brand}),e.jsx("button",{type:"button",onClick:()=>A(!w),className:"mt-2 px-4 py-2 text-sm text-white bg-blue-600 rounded-lg",children:"Manage Brands"}),w&&e.jsxs("div",{className:"mt-4 p-4 border border-gray-300 rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"mb-2 font-bold",children:"Manage Brands"}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"text",value:f,onChange:t=>_(t.target.value),placeholder:"New Brand Name",className:"flex-grow px-2 py-1 border border-gray-300 rounded-lg"}),e.jsx("button",{type:"button",onClick:D,className:"ml-2 px-3 py-1 text-sm text-white bg-green-600 rounded-lg",children:"Add"})]}),e.jsx("ul",{children:m.map(t=>e.jsxs("li",{className:"flex items-center justify-between py-1",children:[e.jsx("span",{children:t.title}),e.jsx("button",{type:"button",onClick:()=>M(t.cat_id),className:"px-2 py-1 text-sm text-white bg-red-600 rounded-lg",children:"Delete"})]},t.cat_id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Product Category"}),e.jsxs("select",{name:"product_category",value:o.product_category,onChange:d,className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select a Category"}),u.map(t=>e.jsx("option",{value:t.cat_id,children:t.title},t.cat_id))]}),e.jsx("button",{type:"button",onClick:()=>F(!C),className:"mt-2 px-4 py-2 text-sm text-white bg-blue-600 rounded-lg",children:"Manage Categories"}),C&&e.jsxs("div",{className:"mt-4 p-4 border border-gray-300 rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"mb-2 font-bold",children:"Manage Categories"}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"text",value:j,onChange:t=>S(t.target.value),placeholder:"New Category Name",className:"flex-grow px-2 py-1 border border-gray-300 rounded-lg"}),e.jsx("button",{type:"button",onClick:O,className:"ml-2 px-3 py-1 text-sm text-white bg-green-600 rounded-lg",children:"Add"})]}),e.jsx("ul",{children:u.map(t=>e.jsxs("li",{className:"flex items-center justify-between py-1",children:[e.jsx("span",{children:t.title}),e.jsx("button",{type:"button",onClick:()=>R(t.cat_id),className:"px-2 py-1 text-sm text-white bg-red-600 rounded-lg",children:"Delete"})]},t.cat_id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Price"}),e.jsx("input",{type:"number",name:"price",value:o.price,onChange:d,className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Enter Price"}),s.price&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.price})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Unit"}),e.jsxs("select",{name:"unit",value:o.unit,onChange:d,className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select a Unit"}),x.map(t=>e.jsx("option",{value:t.cat_id,children:t.title},t.cat_id))]}),e.jsx("button",{type:"button",onClick:()=>P(!v),className:"mt-2 px-4 py-2 text-sm text-white bg-blue-600 rounded-lg",children:"Manage Units"}),v&&e.jsxs("div",{className:"mt-4 p-4 border border-gray-300 rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"mb-2 font-bold",children:"Manage Units"}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"text",value:N,onChange:t=>k(t.target.value),placeholder:"New Unit Name",className:"flex-grow px-2 py-1 border border-gray-300 rounded-lg"}),e.jsx("button",{type:"button",onClick:q,className:"ml-2 px-3 py-1 text-sm text-white bg-green-600 rounded-lg",children:"Add"})]}),e.jsx("ul",{children:x.map(t=>e.jsxs("li",{className:"flex items-center justify-between py-1",children:[e.jsx("span",{children:t.title}),e.jsx("button",{type:"button",onClick:()=>K(t.cat_id),className:"px-2 py-1 text-sm text-white bg-red-600 rounded-lg",children:"Delete"})]},t.cat_id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Image"}),e.jsx("input",{type:"file",name:"image",onChange:U,className:"w-full border border-gray-300 rounded-lg"}),s.image&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.image})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Product Description"}),e.jsx($,{theme:"snow",value:o.product_desc,onChange:t=>p("product_desc",t),placeholder:"Enter Product Description"}),s.product_desc&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.product_desc})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("button",{type:"submit",className:`w-full px-4 py-2 text-white rounded-lg ${g?"bg-gray-400":"bg-blue-600"}`,disabled:g,children:g?"Adding...":"Add Product"})})]})]})})};export{Y as default};
