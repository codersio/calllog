import{q as S,r,W as D,j as e,a as f}from"./app-BV8Hs2DA.js";import{C as A}from"./index-CVsas8er.js";import{R as E}from"./index-BXbMfxoQ.js";import{N as P}from"./notyf.min-DLu_xjpT.js";import{A as _}from"./AdminLayout-7Wm0VRsv.js";import"./index-BfhOz7Dm.js";import"./Dropdown-4iDllGMy.js";import"./index-B8hqPStr.js";const p=new P,Q=({data:n})=>{const{props:a}=S(),[o,j]=r.useState([]);r.useEffect(()=>{Array.isArray(a.auth.permissions)&&j(a.auth.permissions)},[a]);const[c,b]=r.useState(""),[d,N]=r.useState(n),[h,u]=r.useState(1),[i]=r.useState(10);r.useEffect(()=>{const s=n.filter(t=>t.name.toLowerCase().includes(c.toLowerCase())||t.email.toLowerCase().includes(c.toLowerCase())||t.roles.some(l=>l.name.toLowerCase().includes(c.toLowerCase()))||t.datas.some(l=>l.phone.toLowerCase().includes(c.toLowerCase())));N(s)},[c,n]);const g=s=>{b(s.target.value),u(1)},{delete:y}=D(),w=(s,t)=>{s.preventDefault(),confirm("Are you sure you want to delete this record?")&&y(`/service-centers/${t}`,{onSuccess:()=>{p.success("Service center deleted successfully!")},onError:()=>{p.error("Failed to delete data.")}})},m=h*i,v=m-i,x=d.slice(v,m),C=Math.ceil(d.length/i),L=Array.from({length:C},(s,t)=>t+1);return e.jsx(_,{children:e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("input",{type:"text",value:c,onChange:g,placeholder:"Search data...",className:"w-[60%] p-2 border border-gray-300 rounded-md"}),a.auth.user.roles[0].name==="admin"||o.includes("create_service_center")?e.jsx(f,{href:"service-centers/create",className:"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600",children:"Create New Data"}):""]}),e.jsxs("table",{className:"w-full border border-collapse table-auto",children:[e.jsx("thead",{className:"text-white bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left border",children:"Name"}),e.jsx("th",{className:"p-3 text-left border",children:"Email"}),e.jsx("th",{className:"p-3 text-left border",children:"Phone"}),e.jsx("th",{className:"p-3 text-center border",children:"Actions"})]})}),e.jsx("tbody",{children:x.length>0?x.map(s=>e.jsxs("tr",{className:"odd:bg-white even:bg-gray-100",children:[e.jsx("td",{className:"p-3 border",children:s.name}),e.jsx("td",{className:"p-3 border",children:s.email}),e.jsx("td",{className:"p-3 border",children:s.con1}),e.jsx("td",{className:"p-3 text-center border",children:e.jsxs("div",{className:"flex justify-center space-x-3",children:[a.auth.user.roles[0].name==="admin"||o.includes("edit_service_center")?e.jsx(f,{className:"p-2 text-white bg-green-500 rounded",href:`service-centers/${s.id}/edit`,children:e.jsx(A,{})}):"",a.auth.user.roles[0].name==="admin"||o.includes("delete_service_center")?e.jsx("button",{className:"p-2 text-white bg-red-500 rounded",onClick:t=>w(t,s.id),children:e.jsx(E,{})}):""]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"p-3 text-center",children:"No data found"})})})]}),e.jsx("div",{className:"flex justify-center mt-4",children:L.map(s=>e.jsx("button",{onClick:()=>u(s),className:`px-4 py-2 mx-1 rounded ${h===s?"bg-blue-500 text-white":"bg-gray-200"}`,children:s},s))})]})})};export{Q as default};
