import{q as S,r as s,W as A,j as e,a as p}from"./app-BV8Hs2DA.js";import{C as D}from"./index-CVsas8er.js";import{R as _}from"./index-BXbMfxoQ.js";import{N as P}from"./notyf.min-DLu_xjpT.js";import{A as E}from"./AdminLayout-7Wm0VRsv.js";import"./index-BfhOz7Dm.js";import"./Dropdown-4iDllGMy.js";import"./index-B8hqPStr.js";const j=new P,M=({data:d})=>{const{props:r}=S(),[l,b]=s.useState([]);s.useEffect(()=>{Array.isArray(r.auth.permissions)&&b(r.auth.permissions)},[r]);const[o,N]=s.useState(""),[n,L]=s.useState(d),[i,x]=s.useState(1),[c]=s.useState(10);s.useEffect(()=>{},[o,d]);const f=t=>{N(t.target.value),x(1)},{delete:g}=A(),y=(t,a)=>{t.preventDefault(),confirm("Are you sure you want to delete this record?")&&g(`/Call-Allocation/${a}`,{onSuccess:()=>{location.reload(),j.success("Call Allocation  deleted successfully!")},onError:()=>{j.error("Failed to delete data.")}})},h=i*c,m=h-c,u=n.slice(m,h),C=Math.ceil(n.length/c),w=Array.from({length:C},(t,a)=>a+1);return e.jsx(E,{children:e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("input",{type:"text",value:o,onChange:f,placeholder:"Search data...",className:"w-[60%] p-2 border border-gray-300 rounded-md"}),r.auth.user.roles[0].name==="admin"||l.includes("create_call_allocation")?e.jsx(p,{href:"Call-Allocation/create",className:"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600",children:"Create Call Allocation"}):""]}),e.jsx("div",{className:"max-w-5xl overflow-auto",children:e.jsxs("table",{className:"w-full text-nowrap border border-collapse table-auto",children:[e.jsx("thead",{className:"text-white bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left border",children:"SL"}),e.jsx("th",{className:"p-3 text-left border",children:"Call No"}),e.jsx("th",{className:"p-3 text-left border",children:"Customer Name"}),e.jsx("th",{className:"p-3 text-left border",children:"Address"}),e.jsx("th",{className:"p-3 text-center border",children:"Contact No"}),e.jsx("th",{className:"p-3 text-center border",children:"Pin"}),e.jsx("th",{className:"p-3 text-left border",children:"Service Partner Name"}),e.jsx("th",{className:"p-3 text-left border",children:"Call Status"}),e.jsx("th",{className:"p-3 text-left border",children:"Reason"}),e.jsx("th",{className:"p-3 text-center border",children:"Call Starting Date"}),e.jsx("th",{className:"p-3 text-center border",children:"Call Ending Date"}),e.jsx("th",{className:"p-3 text-left border",children:"Total Time"}),e.jsx("th",{className:"p-3 text-left border",children:"Action"})]})}),e.jsx("tbody",{children:u.length>0?u.map((t,a)=>e.jsxs("tr",{className:"odd:bg-white even:bg-gray-100",children:[e.jsx("td",{className:"p-3 border",children:m+a+1}),e.jsx("td",{className:"p-3 border",children:t.call_no}),e.jsx("td",{className:"p-3 border",children:t.customer_name}),e.jsx("td",{className:"p-3 border",children:t.address}),e.jsx("td",{className:"p-3 border",children:t.phone}),e.jsx("td",{className:"p-3 border",children:t.pin}),e.jsx("td",{className:"p-3 border",children:t.service_partner}),e.jsx("td",{className:"p-3 border"}),e.jsx("td",{className:"p-3 border",children:t.reason}),e.jsx("td",{className:"p-3 border"}),e.jsx("td",{className:"p-3 border"}),e.jsx("td",{className:"p-3 border"}),e.jsx("td",{className:"p-3 text-center border",children:e.jsxs("div",{className:"flex justify-center space-x-3",children:[r.auth.user.roles[0].name==="admin"||l.includes("edit_call_allocation")?e.jsx(p,{className:"p-2 text-white bg-green-500 rounded",href:`service-centers/${t.id}/edit`,children:e.jsx(D,{})}):"",r.auth.user.roles[0].name==="admin"||l.includes("delete_call_allocation")?e.jsx("button",{className:"p-2 text-white bg-red-500 rounded",onClick:v=>y(v,t.id),children:e.jsx(_,{})}):""]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"12",className:"p-3 text-center",children:"No data found"})})})]})}),e.jsx("div",{className:"flex justify-center mt-4",children:w.map(t=>e.jsx("button",{onClick:()=>x(t),className:`px-4 py-2 mx-1 rounded ${i===t?"bg-blue-500 text-white":"bg-gray-200"}`,children:t},t))})]})})};export{M as default};
