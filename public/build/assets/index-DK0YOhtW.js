import{q as S,r,W as P,j as e,a as m}from"./app-bBQMqR6O.js";import{C}from"./index-Bdzr3ZA9.js";import{R as D}from"./index-DrwY1Ojx.js";import{N as A}from"./notyf.min-DLu_xjpT.js";import{A as E}from"./AdminLayout-BHjzgd9T.js";import"./index-CYmrYT0Q.js";import"./Dropdown-BP-MPy4X.js";import"./index-BtE-ENE6.js";const u=new A,B=({data:d})=>{const{props:a}=S(),[l,j]=r.useState([]);r.useEffect(()=>{Array.isArray(a.auth.permissions)&&j(a.auth.permissions)},[a]);const[c,b]=r.useState(""),[n,N]=r.useState(d),[i,h]=r.useState(1),[o]=r.useState(10);r.useEffect(()=>{const t=d.filter(s=>s.model.toLowerCase().includes(c.toLowerCase()));N(t)},[c,d]);const f=t=>{b(t.target.value),h(1)},{delete:y}=P(),g=(t,s)=>{t.preventDefault(),confirm("Are you sure you want to delete this record?")&&y(`/spare-part/${s}`,{onSuccess:()=>{u.success("Product Category deleted successfully!")},onError:()=>{u.error("Failed to delete data.")}})},x=i*o,_=x-o,p=n.slice(_,x),w=Math.ceil(n.length/o),v=Array.from({length:w},(t,s)=>s+1);return e.jsx(E,{children:e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("input",{type:"text",value:c,onChange:f,placeholder:"Search data...",className:"w-[60%] p-2 border border-gray-300 rounded-md"}),a.auth.user.roles[0].name==="admin"||l.includes("create_spare_parts")?e.jsx(m,{href:"spare-part/create",className:"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600",children:"Add Spare Parts"}):""]}),e.jsx("div",{className:"max-w-5xl overflow-auto",children:e.jsxs("table",{className:"w-full border text-nowrap border-collapse table-auto",children:[e.jsx("thead",{className:"text-white bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left border",children:"Call Allocation"}),e.jsx("th",{className:"p-3 text-left border",children:"Customer Name"}),e.jsx("th",{className:"p-3 text-left border",children:"Address"}),e.jsx("th",{className:"p-3 text-left border",children:"Phone"}),e.jsx("th",{className:"p-3 text-center border",children:"Service Partner"}),e.jsx("th",{className:"p-3 text-left border",children:"Spare Parts Type"}),e.jsx("th",{className:"p-3 text-left border",children:"Product Name"}),e.jsx("th",{className:"p-3 text-left border",children:"Qty"}),e.jsx("th",{className:"p-3 text-left border",children:"Spare Parts Serial No"}),e.jsx("th",{className:"p-3 text-left border",children:"Date"}),e.jsx("th",{className:"p-3 text-left border",children:"Invoice No"}),e.jsx("th",{className:"p-3 text-left border",children:"Dispatch"}),e.jsx("th",{className:"p-3 text-left border",children:"Details"}),e.jsx("th",{className:"p-3 text-left border",children:"Service Partner"}),e.jsx("th",{className:"p-3 text-center border",children:"Actions"})]})}),e.jsx("tbody",{children:p.length>0?p.map(t=>e.jsxs("tr",{className:"odd:bg-white even:bg-gray-100",children:[e.jsx("td",{className:"p-3 border",children:t.call_allocation}),e.jsx("td",{className:"p-3 border",children:t.customer_name}),e.jsx("td",{className:"p-3 border",children:t.address}),e.jsx("td",{className:"p-3 border",children:t.phone}),e.jsx("td",{className:"p-3 border",children:t.service_partner}),e.jsx("td",{className:"p-3 border",children:t.spare_part_type}),e.jsx("td",{className:"p-3 border",children:t.category_name}),e.jsx("td",{className:"p-3 border",children:t.qty}),e.jsx("td",{className:"p-3 border",children:t.spare_part_ser_no}),e.jsx("td",{className:"p-3 border",children:t.date}),e.jsx("td",{className:"p-3 border",children:t.invoice_no}),e.jsx("td",{className:"p-3 border",children:t.dispatch_module}),e.jsx("td",{className:"p-3 border",children:t.dispatch_type}),e.jsx("td",{className:"p-3 border",children:t.category_name}),e.jsx("td",{className:"p-3 text-center border",children:e.jsxs("div",{className:"flex justify-center space-x-3",children:[a.auth.user.roles[0].name==="admin"||l.includes("edit_spare_parts")?e.jsx(m,{className:"p-2 text-white bg-green-500 rounded",href:`spare-part/${t.id}/edit`,children:e.jsx(C,{})}):"",a.auth.user.roles[0].name==="admin"||l.includes("delete_spare_parts")?e.jsx("button",{className:"p-2 text-white bg-red-500 rounded",onClick:s=>g(s,t.id),children:e.jsx(D,{})}):""]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"p-3 text-center",children:"No data found"})})})]})}),e.jsx("div",{className:"flex justify-center mt-4",children:v.map(t=>e.jsx("button",{onClick:()=>h(t),className:`px-4 py-2 mx-1 rounded ${i===t?"bg-blue-500 text-white":"bg-gray-200"}`,children:t},t))})]})})};export{B as default};
