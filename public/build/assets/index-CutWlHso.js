import{q as D,r,W as S,j as e,a as u}from"./app-bBQMqR6O.js";import{C as E}from"./index-Bdzr3ZA9.js";import{R as P}from"./index-DrwY1Ojx.js";import{N as A}from"./notyf.min-DLu_xjpT.js";import{A as C}from"./AdminLayout-BHjzgd9T.js";import"./index-CYmrYT0Q.js";import"./Dropdown-BP-MPy4X.js";import"./index-BtE-ENE6.js";const N=new A,q=({data:c})=>{const{props:s}=D(),[d,b]=r.useState([]);r.useEffect(()=>{Array.isArray(s.auth.permissions)&&b(s.auth.permissions)},[s]);const[n,p]=r.useState(""),[o,L]=r.useState(c),[i,x]=r.useState(1),[l]=r.useState(10);r.useEffect(()=>{},[n,c]);const f=t=>{p(t.target.value),x(1)},{delete:y}=S(),g=(t,a)=>{t.preventDefault(),confirm("Are you sure you want to delete this record?")&&y(`/Warranty-Extend/${a}`,{onSuccess:()=>{location.reload(),N.success("Warranty deleted successfully!")},onError:()=>{N.error("Failed to delete data.")}})},h=i*l,m=h-l,j=o.slice(m,h),w=Math.ceil(o.length/l),v=Array.from({length:w},(t,a)=>a+1);return e.jsx(C,{children:e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("input",{type:"text",value:n,onChange:f,placeholder:"Search data...",className:"w-[60%] p-2 border border-gray-300 rounded-md"}),s.auth.user.roles[0].name==="admin"||d.includes("create_extended_warranty")?e.jsx(u,{href:"Warranty-Extend/create",className:"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600",children:"Register Extend Warranty"}):""]}),e.jsx("div",{className:"max-w-5xl overflow-auto",children:e.jsxs("table",{className:"w-full text-nowrap border border-collapse table-auto",children:[e.jsx("thead",{className:"text-white bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left border",children:"SL"}),e.jsx("th",{className:"p-3 text-left border",children:"Warranty No"}),e.jsx("th",{className:"p-3 text-left border",children:"Warranty Date "}),e.jsx("th",{className:"p-3 text-left border",children:"Customer Name"}),e.jsx("th",{className:"p-3 text-center border",children:"Address"}),e.jsx("th",{className:"p-3 text-center border",children:"Contact No"}),e.jsx("th",{className:"p-3 text-left border",children:"Pin"}),e.jsx("th",{className:"p-3 text-left border",children:"Service Partner UID"}),e.jsx("th",{className:"p-3 text-left border",children:"Distributor UID"}),e.jsx("th",{className:"p-3 text-center border",children:"Source Of Material"}),e.jsx("th",{className:"p-3 text-center border",children:"Model"}),e.jsx("th",{className:"p-3 text-left border",children:"Date Of Purchase"}),e.jsx("th",{className:"p-3 text-left border",children:"Invoice Date"}),e.jsx("th",{className:"p-3 text-left border",children:"Invoice No"}),e.jsx("th",{className:"p-3 text-left border",children:"SL No"}),e.jsx("th",{className:"p-3 text-left border",children:"SL No 2"}),e.jsx("th",{className:"p-3 text-left border",children:"SL No 3"}),e.jsx("th",{className:"p-3 text-left border",children:"Action"})]})}),e.jsx("tbody",{children:j.length>0?j.map((t,a)=>e.jsxs("tr",{className:"odd:bg-white even:bg-gray-100",children:[e.jsx("td",{className:"p-3 border",children:m+a+1}),e.jsx("td",{className:"p-3 border",children:t.warranty_no}),e.jsx("td",{className:"p-3 border",children:new Date(t.created_at).toLocaleDateString("en-GB")}),e.jsx("td",{className:"p-3 border",children:t.customer_name}),e.jsx("td",{className:"p-3 border",children:t.address}),e.jsx("td",{className:"p-3 border",children:t.phone}),e.jsx("td",{className:"p-3 border",children:t.pin}),e.jsx("td",{className:"p-3 border",children:t.service_partner}),e.jsx("td",{className:"p-3 border",children:t.source_material}),e.jsx("td",{className:"p-3 border",children:t.model}),e.jsx("td",{className:"p-3 border",children:t.purchase}),e.jsx("td",{className:"p-3 border",children:t.invoice_date}),e.jsx("td",{className:"p-3 border",children:t.invoice_no}),e.jsx("td",{className:"p-3 border",children:t.sl_no}),e.jsx("td",{className:"p-3 border",children:t.sl_no}),e.jsx("td",{className:"p-3 border",children:t.sl_no}),e.jsx("td",{className:"p-3 border",children:t.sl_no}),e.jsx("td",{className:"p-3 text-center border",children:e.jsxs("div",{className:"flex justify-center space-x-3",children:[s.auth.user.roles[0].name==="admin"||d.includes("edit_extended_warranty")?e.jsx(u,{className:"p-2 text-white bg-green-500 rounded",href:`service-centers/${t.id}/edit`,children:e.jsx(E,{})}):"",s.auth.user.roles[0].name==="admin"||d.includes("delete_extended_warranty")?e.jsx("button",{className:"p-2 text-white bg-red-500 rounded",onClick:_=>g(_,t.id),children:e.jsx(P,{})}):""]})})]},t.id)):e.jsxs("tr",{children:[e.jsx("td",{colSpan:"18",className:"p-3 text-center",children:"No data found"})," "]})})]})}),e.jsx("div",{className:"flex justify-center mt-4",children:v.map(t=>e.jsx("button",{onClick:()=>x(t),className:`px-4 py-2 mx-1 rounded ${i===t?"bg-blue-500 text-white":"bg-gray-200"}`,children:t},t))})]})})};export{q as default};
