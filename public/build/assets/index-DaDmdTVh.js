import{q as D,r as a,W as v,j as e,a as h}from"./app-CwTpoyqh.js";import{A as C}from"./AdminLayout-DQmQe51a.js";import{N as S}from"./notyf.min-DLu_xjpT.js";import"./Dropdown-C_Ing8xx.js";import"./index-DXOuEoXo.js";import"./index-CBtgs9-R.js";const p=new S;function q({tasks:n}){const{props:r}=D(),[d,f]=a.useState([]);a.useEffect(()=>{Array.isArray(r.auth.permissions)&&f(r.auth.permissions)},[r]);const[l,j]=a.useState(""),[c,g]=a.useState(n),[o,m]=a.useState(1),[i]=a.useState(10);a.useEffect(()=>{const t=n.filter(s=>(s.first_name+" "+s.middle_name+" "+s.last_name).toLowerCase().includes(l.toLowerCase()));g(t)},[l,n]);const b=t=>{j(t.target.value),m(1)},x=o*i,y=x-i,u=c.slice(y,x),N=Math.ceil(c.length/i),w=Array.from({length:N},(t,s)=>s+1),{delete:_}=v();function A(t){event.preventDefault(),confirm("Are you sure you want to delete this task?")&&_(route("tasks.destroy",t),{onSuccess:()=>{p.success("Task deleted successfully!")},onError:()=>{p.error("Failed to delete task.")}})}return e.jsx(C,{children:e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("input",{type:"search",value:l,onChange:b,placeholder:"Search data...",className:"w-[60%] p-2 border border-gray-300 rounded-md"}),r.auth.user.roles[0].name==="admin"||d.includes("create_task")?e.jsx(h,{href:"tasks/create",className:"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600",children:"Add Task"}):""]}),e.jsxs("table",{className:"w-full border border-collapse table-auto",children:[e.jsx("thead",{className:"text-white bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left border",children:"Client"}),e.jsx("th",{className:"p-3 text-left border",children:"Assign To"}),e.jsx("th",{className:"p-3 text-left border",children:"Assign Date"}),e.jsx("th",{className:"p-3 text-left border",children:"Close Date"}),e.jsx("th",{className:"p-3 text-left border",children:"Status"}),e.jsx("th",{className:"p-3 text-center border",children:"Actions"})]})}),e.jsx("tbody",{children:u&&u.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-3",children:t.first_name+" "+t.middle_name+" "+t.last_name}),e.jsx("td",{className:"p-3",children:t.name}),e.jsx("td",{className:"p-3",children:t.assign_date}),e.jsx("td",{className:"p-3",children:t.close_date}),e.jsx("td",{children:e.jsxs("div",{className:"flex justify-center",children:[t.status=="open"&&e.jsx("p",{className:"text-sm font-medium bg-green-500 px-2 text-white py-1 rounded",children:"Open"}),t.status=="progress"&&e.jsx("p",{className:"text-sm font-medium bg-amber-500 px-2 py-1 rounded",children:"In Progress"}),t.status=="closed"&&e.jsx("p",{className:"text-sm font-medium bg-red-500 text-white px-2 py-1 rounded",children:"Closed"})]})}),e.jsxs("td",{className:"p-3 flex gap-1",children:[r.auth.user.roles[0].name==="admin"||d.includes("edit_task")?e.jsx(h,{href:`/tasks/${t.id}/edit`,className:"text-sm flex items-center gap-1 font-medium px-2 py-1 bg-blue-500 text-white rounded",children:e.jsx("span",{children:"Edit"})}):"",r.auth.user.roles[0].name==="admin"||d.includes("delete_task")?e.jsx("button",{type:"button",onClick:()=>A(t.id),className:"text-sm flex items-center gap-1 font-medium px-2 py-1 bg-red-500 text-white rounded",children:e.jsx("span",{children:"Delete"})}):""]})]},s))})]}),e.jsx("div",{className:"flex justify-center mt-4",children:w.map(t=>e.jsx("button",{onClick:()=>m(t),className:`px-4 py-2 mx-1 rounded ${o===t?"bg-blue-500 text-white":"bg-gray-200"}`,children:t},t))})]})})}export{q as default};
