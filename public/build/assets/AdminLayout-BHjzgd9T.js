import{q as p,r as n,j as e,a as s}from"./app-bBQMqR6O.js";import"./Dropdown-BP-MPy4X.js";import{I as P,a as M,b as A,c as l,d as E,e as j,f,g,h as v,i as N,j as L,k as T,F,l as B,m as D,n as G,o as Q,p as W,R as q,L as U}from"./index-BtE-ENE6.js";import{F as X}from"./index-CYmrYT0Q.js";function ee({header:H,children:b,notif:c,user_type:J}){const{props:a}=p(),[r,w]=n.useState([]);n.useEffect(()=>{Array.isArray(a.auth.permissions)&&w(a.auth.permissions)},[a]),n.useState(!1);const[x,y]=n.useState(!1),[d,z]=n.useState(!1);n.useState(!1);const[h,k]=n.useState(!1);n.useState(!1);const S=i=>{i.stopPropagation(),m(o=>!o),u(!1)},C=i=>{i.stopPropagation(),u(o=>!o),m(!1)},$=n.useRef(null),[_,u]=n.useState(!1),I=n.useRef(null),[R,m]=n.useState(!1),O=async i=>{try{await axios.post(`readta/${i}`),setUnreadCount(o=>Math.max(o-1,0))}catch(o){console.error("Error marking notification as read",o)}},{url:t}=p();return e.jsxs("div",{className:"fixed w-full h-full left-0 top-0 flex",children:[e.jsx("div",{ref:I,className:`fixed top-0 z-30 right-0 left-0 flex justify-end w-full h-full bg-black/30 backdrop-blur-sm transition-all duration-300 ${R?"opacity-100 pointer-events-auto":"opacity-0 delay-300 pointer-events-none"}`,children:e.jsxs("div",{className:"bg-white scrollbar-thumb-sky-700 scrollbar-track-white",children:[e.jsxs("div",{className:"flex items-center justify-between px-2 py-3",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Notifications"}),e.jsx("button",{onClick:S,children:e.jsx(X,{size:16})})]}),e.jsx("div",{className:"h-[30rem] w-[20rem] space-y-3 overflow-y-scroll bg-white scrollbar-thin scrollbar-thumb-sky-700 scrollbar-track-white",children:c==null?void 0:c.map(i=>e.jsxs("a",{onClick:()=>O(i.id),href:i.data.url,className:"flex items-center w-full p-2.5 gap-x-4 hover:bg-gray-100 shadow-md shadow-gray-200 rounded",children:[e.jsx("div",{className:"border border-gray-200 p-1.5 rounded-full",children:e.jsx(BiTask,{size:18,className:"text-green-500"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800",children:i.data.project}),e.jsx("span",{className:"font-semibold text-blue-500",children:i.data.employee_id}),e.jsx("span",{className:"text-sm text-gray-700",children:i.data.message})]}),!i.read_at&&e.jsx("span",{className:"bg-red-500 w-1.5 h-1.5 rounded-full ml-auto"})]},i.id))}),e.jsx("div",{className:"p-5",children:e.jsxs(s,{href:"/notifications-get",className:"flex items-center justify-center w-full py-2 text-sm text-center text-white bg-blue-500 rounded",children:[e.jsx(P,{className:"text-[1.5rem]"}),e.jsx("span",{children:"See All Notifications"})]})})]})}),e.jsxs("aside",{className:"w-64 h-full flex flex-col border-r border-gray-300",children:[e.jsx("div",{className:"flex justify-center pt-2",children:e.jsx("img",{width:130,src:"/logo/logo2.jpg",alt:""})}),e.jsxs("ul",{className:"p-4 flex-1 overflow-y-auto custom-scrollbar space-y-2",children:[e.jsx("li",{children:e.jsxs(s,{href:"/",className:`flex items-center p-3 rounded gap-x-1 transition duration-300 hover:bg-rose-500 hover:text-white ${t==="/"?"text-white bg-rose-500":""}`,children:[e.jsx(M,{size:15}),e.jsx("span",{className:"text-sm",children:"Dashboard"})]})}),e.jsx("li",{children:e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>k(!h),className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white w-full ${t==="/tasktype"||t==="/interval"||t==="/tax"||t==="/purchase"||t==="/stocks"?"text-white bg-rose-500":""}`,children:[e.jsx(A,{size:15}),e.jsx("span",{className:"text-sm",children:"Master"}),e.jsx(l,{size:15,className:`ml-auto transition-all duration-300 ${h?"rotate-90":"rotate-0"}`})]}),h&&e.jsxs("ul",{className:"ml-4 space-y-2",children:[e.jsx("li",{children:e.jsxs(s,{href:"/tasktype",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Task Type"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/interval",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Interval"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/tax",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Tax"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/purchase",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Purchase"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/stocks",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Stock"})]})})]})]})}),a.auth.user.roles[0].name==="admin"||r.includes("view_distributers")?e.jsx("li",{children:e.jsxs(s,{href:"/distributers",className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white ${t==="/distributers"?"text-white bg-rose-500":""}`,children:[e.jsx(E,{size:15}),e.jsx("span",{className:"text-sm",children:"Distributor"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_service_center")?e.jsx("li",{children:e.jsxs(s,{href:"/service-centers",className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white ${t==="/service-centers"?"text-white bg-rose-500":""}`,children:[e.jsx(j,{size:15}),e.jsx("span",{className:"text-sm",children:"Service Center"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_spare_parts")?e.jsx("li",{children:e.jsxs(s,{href:"/spare-part",className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white ${t==="/spare-part"?"text-white bg-rose-500":""}`,children:[e.jsx(f,{size:15}),e.jsx("span",{className:"text-sm",children:"Spare & Parts"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_call_allocation")?e.jsx("li",{children:e.jsxs(s,{href:"/Call-Allocation",className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white ${t==="/Call-Allocation"?"text-white bg-rose-500":""}`,children:[e.jsx(g,{size:15}),e.jsx("span",{className:"text-sm",children:"Call Allocation"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_extended_warranty")?e.jsx("li",{children:e.jsxs(s,{href:"/Warranty-Extend",className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white ${t==="/Warranty-Extend"?"text-white bg-rose-500":""}`,children:[e.jsx(v,{size:15}),e.jsx("span",{className:"text-sm",children:"Extened Warrenty"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_client")?e.jsx("li",{children:e.jsxs(s,{href:"/Client",className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white ${t==="/Client"?"text-white bg-rose-500":""}`,children:[e.jsx(N,{size:15}),e.jsx("span",{className:"text-sm",children:"Client"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_employee")?e.jsx("li",{children:e.jsxs(s,{href:"/Employee",className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white ${t==="/Employee"?"text-white bg-rose-500":""}`,children:[e.jsx(N,{size:15}),e.jsx("span",{className:"text-sm",children:"Employees"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_product")?e.jsx("li",{children:e.jsxs(s,{href:"/Product-List",className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white ${t==="/Product-List"?"text-white bg-rose-500":""}`,children:[e.jsx(L,{size:15}),e.jsx("span",{className:"text-sm",children:"Products"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_quotation")?e.jsx("li",{children:e.jsxs(s,{href:"/Quotation",className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white ${t==="/Quotation"?"text-white bg-rose-500":""}`,children:[e.jsx(T,{size:15}),e.jsx("span",{className:"text-sm",children:"Quotation"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_services")?e.jsx("li",{children:e.jsxs(s,{href:"/services",className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white ${t==="/services"?"text-white bg-rose-500":""}`,children:[e.jsx(j,{size:15}),e.jsx("span",{className:"text-sm",children:"Services"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_sales")?e.jsx("li",{children:e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>y(!x),className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white w-full ${t==="/sales"||t==="/amc-expense-index"||t==="/income"?"text-white bg-rose-500":""}`,children:[e.jsx(g,{size:15}),e.jsx("span",{className:"text-sm",children:"Sales"}),e.jsx(l,{size:15,className:`ml-auto transition-all duration-300 ${x?"rotate-90":"rotate-0"}`})]}),x&&e.jsxs("ul",{className:"ml-4 space-y-2",children:[e.jsx("li",{children:e.jsxs(s,{href:"/sales",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Bill"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/amc-expense-index",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Expense"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/income",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Income"})]})})]})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_amc")?e.jsx("li",{children:e.jsxs(s,{href:"/amc",className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white ${t==="/amc"?"text-white bg-rose-500":""}`,children:[e.jsx(f,{size:15}),e.jsx("span",{className:"text-sm",children:"AMC"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_complaint")?e.jsx("li",{children:e.jsxs(s,{href:"/complaint",className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white ${t==="/complaint"?"text-white bg-rose-500":""}`,children:[e.jsx(v,{size:15}),e.jsx("span",{className:"text-sm",children:"Complaint"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_task")?e.jsx("li",{children:e.jsxs(s,{href:"/tasks",className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white ${t==="/tasks"?"text-white bg-rose-500":""}`,children:[e.jsx(F,{size:15}),e.jsx("span",{className:"text-sm",children:"Tasks"})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_report")?e.jsx("li",{children:e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>z(!d),className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white w-full ${t==="/complaint-reports"||t==="/sales-reports"||t==="/service-reports"?"text-white bg-rose-500":""}`,children:[e.jsx(B,{size:15}),e.jsx("span",{className:"text-sm",children:"Reports"}),e.jsx(l,{size:15,className:`ml-auto transition-all duration-300 ${d?"rotate-90":"rotate-0"}`})]}),d&&e.jsxs("ul",{className:"ml-4 space-y-2",children:[e.jsx("li",{children:e.jsxs(s,{href:"/complaint-reports",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Complaint Reports"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/sales-reports",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Sales Report"})]})}),e.jsx("li",{children:e.jsxs(s,{href:"/service-reports",className:"flex items-center gap-1 p-2 hover:bg-gray-100",children:[e.jsx(l,{size:15}),e.jsx("span",{className:"text-sm",children:"Service Reports"})]})})]})]})}):"",a.auth.user.roles[0].name==="admin"||r.includes("view_role")?e.jsx("li",{children:e.jsxs(s,{href:"/roles-permission-details",className:`flex items-center p-3 transition duration-300 rounded gap-x-1 hover:bg-rose-500 hover:text-white ${t==="/roles-permission-details"?"text-white bg-rose-500":""}`,children:[e.jsx(D,{size:15}),e.jsx("span",{className:"text-sm",children:"Roles & Permissions"})]})}):""]})]}),e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsxs("nav",{className:"flex items-center justify-between w-full p-3 px-6 border-b border-gray-300",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx("button",{onClick:i=>m(!0),className:"p-2 bg-gray-300 rounded",children:e.jsx(G,{size:15})}),e.jsx("button",{className:"p-2 bg-gray-300 rounded",children:e.jsx(Q,{size:15})}),e.jsxs("div",{className:"flex space-x-2 cursor-pointer",onClick:C,children:[e.jsx("span",{className:"grid place-items-center",children:e.jsx(W,{className:"text-[1.5rem]"})}),e.jsx("span",{className:"text-[1rem]",children:a.auth.user.name})]}),e.jsx("div",{className:"relative grid place-items-center",children:e.jsx("div",{ref:$,className:`absolute top-full p-4 -right-5 my-5 border border-gray-300 rounded w-[10rem] bg-white shadow-lg transition-all duration-300 shadow-zinc-800/50 ${_?"opacity-100 pointer-events-auto translate-y-0":"opacity-0 pointer-events-none translate-y-14"}`,children:e.jsx("div",{children:e.jsx("li",{className:"p-2 text-black list-none",children:e.jsxs(q,{method:"post",href:route("logout"),as:"button",className:"flex space-x-2",children:[e.jsx("span",{className:"grid mt-1 place-items-center",children:e.jsx(U,{})}),e.jsx("span",{children:"Log Out"})]})})})})})]})]}),e.jsx("div",{className:"flex-1 h-full p-4 overflow-y-auto",children:b})]})]})}export{ee as A};
