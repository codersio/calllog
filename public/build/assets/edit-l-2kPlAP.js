import{W as v,j as e}from"./app-bBQMqR6O.js";import{N as C}from"./notyf.min-DLu_xjpT.js";import{A as w}from"./AdminLayout-BHjzgd9T.js";import"./index-BUrNszlx.js";import"./Dropdown-BP-MPy4X.js";import"./index-BtE-ENE6.js";import"./index-CYmrYT0Q.js";const b=new C,D=({client:t,client_history:u})=>{console.log(t);const{data:a,setData:d,patch:p,processing:m,errors:s}=v({client_id:t.client_id,first_name:t.first_name,middle_name:t.middle_name,last_name:t.last_name,gender:t.gender||"male",dob:t.dob,company_name:t.company_name,position:t.main_person,account_number:t.account_number,ifsc_code:t.ifs_code,branch_name:t.branch_name,tin_no:t.tin_no,cst_no:t.cst_no,pan_no:t.pan_no,contact_person:u||[],mobile_no:t.mobile_no,addresses:t.address||[],city:t.city,state:t.state,pin:t.pincode,alt_mobile:t.alt_mobile,photo:"",email:t.email,password:""}),h=r=>{d("photo",r.target.files[0])},n=r=>{d(r.target.name,r.target.value)},i=r=>{d("gender",r.target.value)},g=(r,l)=>{const o=[...a.addresses];o[r].address=l.target.value,d("addresses",o)},y=()=>{d("addresses",[...a.addresses,{address:""}])},f=r=>{const l=a.addresses.filter((o,c)=>c!==r);d("addresses",l)},N=()=>{d("contact_person",[...a.contact_person,{name:"",mobile:"",designation:""}])},x=(r,l,o)=>{const c=[...a.contact_person];c[r][l]=o,d("contact_person",c)},j=r=>{const l=a.contact_person.filter((o,c)=>c!==r);d("contact_person",l)},_=r=>{r.preventDefault(),p(`/Client/${t.user_id}`,{onSuccess:()=>{b.success("Client updated successfully!")},onError:()=>{b.error("Failed to update client. Please check your inputs.")}})};return e.jsx(w,{children:e.jsxs("div",{className:"max-w-4xl p-8 mx-auto bg-white rounded-lg shadow-md",children:[e.jsx("h2",{className:"mb-6 text-2xl font-bold text-gray-800",children:"Edit Client"}),e.jsx("h2",{className:"mb-1 text-2xl font-bold text-gray-600",children:"Personal Information"}),e.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Client Id"}),e.jsx("input",{type:"text",name:"client_id",readOnly:!0,value:a.client_id,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Client Id"}),s.client_id&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.client_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"First Name"}),e.jsx("input",{type:"text",name:"first_name",value:a.first_name,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter First Name"}),s.first_name&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.first_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Middle Name"}),e.jsx("input",{type:"text",name:"middle_name",value:a.middle_name,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Middle Name"}),s.middle_name&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.middle_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Last Name"}),e.jsx("input",{type:"text",name:"last_name",value:a.last_name,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Last Name"}),s.last_name&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.last_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Gender"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"male",checked:a.gender==="male",onChange:i,className:"mr-2"}),"Male"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"female",checked:a.gender==="female",onChange:i,className:"mr-2"}),"Female"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",value:"other",checked:a.gender==="other",onChange:i,className:"mr-2"}),"Other"]})]}),s.gender&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.gender})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Date of Birth"}),e.jsx("input",{type:"date",name:"dob",value:a.dob,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"}),s.dob&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.dob})]}),e.jsx("h2",{className:"mb-1 text-2xl font-bold text-gray-600 md:col-span-2",children:"Company Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Main Person Name"}),e.jsx("input",{type:"text",name:"position",value:a.position,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Position"}),s.position&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.position})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Company Name"}),e.jsx("input",{type:"text",name:"company_name",value:a.company_name,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Company Name"}),s.company_name&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.company_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Account Number"}),e.jsx("input",{type:"text",name:"account_number",value:a.account_number,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Account Number"}),s.account_number&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.account_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"IFSC Code"}),e.jsx("input",{type:"text",name:"ifsc_code",value:a.ifsc_code,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter IFSC Code"}),s.ifsc_code&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.ifsc_code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Branch Name"}),e.jsx("input",{type:"text",name:"branch_name",value:a.branch_name,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Branch Name"}),s.branch_name&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.branch_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"TIN No"}),e.jsx("input",{type:"text",name:"tin_no",value:a.tin_no,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter TIN No"}),s.tin_no&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.tin_no})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"CST No"}),e.jsx("input",{type:"text",name:"cst_no",value:a.cst_no,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter CST No"}),s.cst_no&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.cst_no})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"PAN No"}),e.jsx("input",{type:"text",name:"pan_no",value:a.pan_no,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter PAN No"}),s.pan_no&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.pan_no})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Mobile No"}),e.jsx("input",{type:"text",name:"mobile_no",value:a.mobile_no,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Mobile No"}),s.mobile_no&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.mobile_no})]}),e.jsx("h2",{className:"mb-1 text-2xl font-bold text-gray-600 md:col-span-2",children:"Address Information"}),a.addresses.map((r,l)=>e.jsxs("div",{className:"md:col-span-2 flex items-center space-x-2",children:[e.jsx("input",{name:`address_${l}`,value:r.address,onChange:o=>g(l,o),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Address",required:!0}),a.addresses.length>1&&e.jsx("button",{type:"button",onClick:()=>f(l),className:"px-4 py-2 text-red-600 bg-transparent border border-red-600 rounded-lg hover:bg-red-600 hover:text-white",children:"-"}),e.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 text-green-600 bg-transparent border border-green-600 rounded-lg hover:bg-green-600 hover:text-white",children:"+"})]},l)),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"City"}),e.jsx("input",{type:"text",name:"city",value:a.city,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter City"}),s.city&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.city})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"State"}),e.jsx("input",{type:"text",name:"state",value:a.state,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter State"}),s.state&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.state})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Pin Code"}),e.jsx("input",{type:"text",name:"pin",value:a.pin,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Pin Code"}),s.pin&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.pin})]}),e.jsx("h2",{className:"mb-1 text-2xl font-bold text-gray-600 md:col-span-2",children:"Contact"}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Alternate Mobile No"}),e.jsx("input",{type:"text",name:"alt_mobile",value:a.alt_mobile,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Alternate Mobile"}),s.alt_mobile&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.alt_mobile})]}),e.jsx("h2",{className:"mb-1 text-2xl font-bold text-gray-600 md:col-span-2",children:"Other Info"}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"text",name:"email",value:a.email,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Email"}),s.email&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{type:"text",name:"password",value:a.password,onChange:n,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Password"}),s.password&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Upload Image"}),e.jsx("input",{type:"file",name:"photo",accept:"image/*",onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"}),s.photo&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.photo})]}),e.jsx("h2",{className:"mb-1 text-2xl font-bold text-gray-600 md:col-span-2",children:"Other Contact Details"}),e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx("button",{type:"button",onClick:N,className:"px-6 py-3 text-white bg-green-600 rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50 disabled:opacity-50",children:m?"Processing...":"Add New"})}),e.jsxs("table",{className:"table-auto border-collapse border border-gray-300",id:"tab_product_detail",align:"center",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Contact Person Name"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Mobile Number"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Designation"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Action"})]})}),e.jsx("tbody",{children:a.contact_person.map((r,l)=>e.jsxs("tr",{id:`row_id_${l}`,children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",name:`contact_person[name][${l}]`,placeholder:"Enter Name..",className:"quantity form-control",value:r.name,onChange:o=>x(l,"name",o.target.value)})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",name:`contact_person[mobile][${l}]`,placeholder:"Enter Mobile Number..",className:"quantity form-control",value:r.mobile,onChange:o=>x(l,"mobile",o.target.value)})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"text",name:`contact_person[designation][${l}]`,placeholder:"Enter Designation..",className:"quantity form-control",value:r.designation,onChange:o=>x(l,"designation",o.target.value)})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:e.jsxs("span",{className:"trash",onClick:()=>j(l),children:[e.jsx("i",{className:"fa fa-trash"})," Delete"]})})]},l))})]}),e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx("button",{type:"submit",disabled:m,className:"px-6 py-3 text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50 disabled:opacity-50",children:m?"Processing...":"Update Client"})})]})]})})};export{D as default};
