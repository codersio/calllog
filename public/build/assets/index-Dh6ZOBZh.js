import{q as S,r as a,W as A,j as e,a as f}from"./app-CwTpoyqh.js";import{C as P}from"./index-DKlx98bH.js";import{R as E}from"./index-bxi0VpGJ.js";import{N as _}from"./notyf.min-DLu_xjpT.js";import{A as k}from"./AdminLayout-DQmQe51a.js";import"./index-CBtgs9-R.js";import"./Dropdown-C_Ing8xx.js";import"./index-DXOuEoXo.js";const b=new _,U=({data:d})=>{const{props:o}=S(),[i,j]=a.useState([]);a.useEffect(()=>{Array.isArray(o.auth.permissions)&&j(o.auth.permissions)},[o]);const[l,g]=a.useState(""),[h,N]=a.useState(d),[u,m]=a.useState(1),[c]=a.useState(10);a.useEffect(()=>{const s=d.filter(t=>t.name.toLowerCase().includes(l.toLowerCase())||t.email.toLowerCase().includes(l.toLowerCase())||t.roles.some(r=>r.name.toLowerCase().includes(l.toLowerCase()))||t.datas.some(r=>r.phone.toLowerCase().includes(l.toLowerCase())));N(s)},[l,d]);const w=s=>{g(s.target.value),m(1)},{delete:y}=A(),C=(s,t)=>{s.preventDefault(),confirm("Are you sure you want to delete this record?")&&y(`/delars/${t}`).then(()=>{b.success("Data deleted successfully"),setDistributors(r=>r.filter(n=>n.id!==t))}).catch(r=>{var n;console.error("Delete error:",r.response?r.response.data:r.message),b.error("Failed to delete data: "+(((n=r.response)==null?void 0:n.data.message)||"Unknown error"))})},x=u*c,D=x-c,p=h.slice(D,x),L=Math.ceil(h.length/c),v=Array.from({length:L},(s,t)=>t+1);return e.jsx(k,{children:e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("input",{type:"text",value:l,onChange:w,placeholder:"Search data...",className:"w-[60%] p-2 border border-gray-300 rounded-md"}),o.auth.user.roles[0].name==="admin"||i.includes("create_dealer")?e.jsx(f,{href:"distributers/create",className:"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600",children:"Create New Data"}):""]}),e.jsxs("table",{className:"w-full border border-collapse table-auto",children:[e.jsx("thead",{className:"text-white bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left border",children:"Name"}),e.jsx("th",{className:"p-3 text-left border",children:"Email"}),e.jsx("th",{className:"p-3 text-left border",children:"Phone"}),e.jsx("th",{className:"p-3 text-center border",children:"Actions"})]})}),e.jsx("tbody",{children:p.length>0?p.map(s=>e.jsxs("tr",{className:"odd:bg-white even:bg-gray-100",children:[e.jsx("td",{className:"p-3 border",children:s.name}),e.jsx("td",{className:"p-3 border",children:s.email}),e.jsx("td",{className:"p-3 border",children:s.con1}),e.jsx("td",{className:"p-3 text-center border",children:e.jsxs("div",{className:"flex justify-center space-x-3",children:[o.auth.user.roles[0].name==="admin"||i.includes("edit_dealer")?e.jsx(f,{className:"p-2 text-white bg-green-500 rounded",href:`delars/${s.id}/edit`,children:e.jsx(P,{})}):"",o.auth.user.roles[0].name==="admin"||i.includes("delete_dealer")?e.jsx("button",{className:"p-2 text-white bg-red-500 rounded",onClick:t=>C(t,s.id),children:e.jsx(E,{})}):""]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"p-3 text-center",children:"No data found"})})})]}),e.jsx("div",{className:"flex justify-center mt-4",children:v.map(s=>e.jsx("button",{onClick:()=>m(s),className:`px-4 py-2 mx-1 rounded ${u===s?"bg-blue-500 text-white":"bg-gray-200"}`,children:s},s))})]})})};export{U as default};
