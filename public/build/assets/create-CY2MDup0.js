import{W as b,r as j,j as e}from"./app-bBQMqR6O.js";import{A as N}from"./AdminLayout-BHjzgd9T.js";import"./Dropdown-BP-MPy4X.js";import"./index-BtE-ENE6.js";import"./index-CYmrYT0Q.js";function k({employees:o,customers:n,products:m,serviceCode:u,service:a}){const{data:l,setData:d,post:x,put:g,processing:i,errors:y}=b({service_code:u,service_date:"2024-10-29",customer_id:"",assigned_to:"",status:"open",service_charge:"no-charge",service_details:"",amc_details:[{id:Date.now(),product:"PR584062024 Chiquita Castro",note:""}]});j.useEffect(()=>{a&&d({service_code:a.service_code,service_date:a.service_date,customer_id:a.customer_id,assigned_to:a.assigned_to,status:a.status,service_charge:a.service_charge,service_details:a.service_details,amc_details:a.amc_details.length>0?a.amc_details:[{id:Date.now(),product:"",note:""}]})},[a]);const h=()=>{d("amc_details",[...l.amc_details,{id:Date.now(),product:"",note:""}])},p=s=>{d("amc_details",l.amc_details.filter(t=>t.id!==s))},c=(s,t,_)=>{d("amc_details",l.amc_details.map(r=>r.id===s?{...r,[t]:_}:r))},v=s=>{s.preventDefault(),a?g(route("services.update",a.id)):x(route("services.store"))};return e.jsx(N,{children:e.jsxs("form",{onSubmit:v,className:"p-6 mx-auto bg-white rounded-lg shadow-md",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:a?"Edit Service":"Service Form"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",children:"Service Code *"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded-lg",value:l.service_code,disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",children:"Service Date *"}),e.jsx("input",{type:"date",className:"w-full px-3 py-2 border rounded-lg",value:l.service_date,onChange:s=>d("service_date",s.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",children:"Customer Name *"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg",value:l.customer_id,onChange:s=>d("customer_id",s.target.value),children:[e.jsx("option",{value:"",children:"--Select Customer--"}),n.map(s=>e.jsx("option",{value:s.user_id,children:s.first_name+" "+s.middle_name+" "+s.last_name},s.user_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",children:"Assigned To *"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg",value:l.assigned_to,onChange:s=>d("assigned_to",s.target.value),children:[e.jsx("option",{value:"",children:"--Select Name--"}),o.map(s=>e.jsx("option",{value:s.user_id,children:s.first_name+" "+s.middle_name+" "+s.last_name},s.user_id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",children:"Status *"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg",value:l.status,onChange:s=>d("status",s.target.value),children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"closed",children:"Closed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",children:"Service Charge (Af)"}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg",value:l.service_charge,onChange:s=>d("service_charge",s.target.value),children:[e.jsx("option",{value:"no-charge",children:"No Charge"}),e.jsx("option",{value:"charge",children:"Charge"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",children:"Service Details *"}),e.jsx("textarea",{className:"w-full px-3 py-2 border rounded-lg",rows:"4",placeholder:"Enter service details here...",value:l.service_details,onChange:s=>d("service_details",s.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"mb-2 text-lg font-semibold",children:"AMC Details"}),e.jsx("button",{type:"button",onClick:h,className:"px-4 py-2 mb-2 text-white bg-blue-500 rounded-lg",children:"Add New"}),l.amc_details.map(s=>e.jsxs("div",{className:"grid items-center grid-cols-3 gap-4 p-3 mb-2 border rounded-lg",children:[e.jsxs("select",{className:"col-span-1 px-3 py-2 border rounded-lg",value:s.product,onChange:t=>c(s.id,"product",t.target.value),children:[e.jsx("option",{value:"",children:"--Select Product--"}),m.map(t=>e.jsx("option",{value:t.id,children:t.item_name},t.id))]}),e.jsx("input",{type:"text",className:"col-span-1 px-3 py-2 border rounded-lg",value:s.note,placeholder:"Note",onChange:t=>c(s.id,"note",t.target.value)}),e.jsx("button",{type:"button",onClick:()=>p(s.id),className:"col-span-1 text-red-500 hover:text-red-700",children:"Delete"})]},s.id))]}),e.jsx("button",{type:"submit",className:"w-full px-4 py-2 text-white bg-green-500 rounded-lg",disabled:i,children:i?"Saving...":a?"Update":"Save"})]})})}export{k as default};
