import{r as m,W as N,j as e}from"./app-BV8Hs2DA.js";import{M as y}from"./Modal-C9mI4hzs.js";import{N as I}from"./notyf.min-DLu_xjpT.js";import{A as w}from"./AdminLayout-7Wm0VRsv.js";import"./transition-CNLACO7g.js";import"./Dropdown-4iDllGMy.js";import"./index-B8hqPStr.js";import"./index-BfhOz7Dm.js";const T=({interval:x})=>{const[h,d]=m.useState(!1),[s,o]=m.useState(null),r=new I,{data:i,setData:c,post:p,put:b,delete:f,reset:j,errors:a}=N({name:"",status:1}),u=(t=null)=>{d(!0),t&&c(l=>({...l,name:t.name||"",status:t.status||0})),o(t?t.id:null)},n=()=>{d(!1),o(null),j("name","status")},g=t=>{t.preventDefault(),s?(console.log(s),b(`/interval-update/${s}`,{onSuccess:()=>{r.success("Interval updated successfully!"),n()},onError:()=>{r.error("An error occurred while updating the interval.")}})):p("/interval-store",{onSuccess:()=>{r.success("Interval created successfully!"),n()},onError:()=>{r.error("An error occurred while creating the interval.")}})},v=async t=>{if(confirm("Are you sure you want to delete this interval?"))try{await f(`/interval-delete/${t}`),r.success("Interval deleted successfully!")}catch(l){console.error("Error deleting interval:",l),r.error("An error occurred while deleting the interval.")}};return e.jsxs(e.Fragment,{children:[e.jsx(w,{children:e.jsxs("div",{className:"flex-1 p-6 bg-gray-100",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"mb-4 text-2xl font-bold",children:"Manage Intervals"}),e.jsx("button",{onClick:()=>u(),className:"p-2 text-teal-900 underline rounded-md",children:"Create Interval"})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("table",{className:"min-w-full border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left border-b",children:"Interval Time"}),e.jsx("th",{className:"px-4 py-2 text-left border-b",children:"Status"}),e.jsx("th",{className:"px-4 py-2 text-right border-b",children:"Action"})]})}),e.jsx("tbody",{children:x.map(t=>e.jsxs("tr",{className:"transition duration-200 hover:bg-gray-100",children:[e.jsx("td",{className:"px-4 py-2 border-b",children:t.name+" Month"}),e.jsx("td",{className:"px-4 py-2 border-b",children:e.jsx("div",{className:"flex",children:t.status?e.jsx("p",{className:"text-sm font-semibold text-green-500 bg-green-100 px-3 py-0.5 rounded-full",children:"Active"}):e.jsx("p",{className:"text-sm font-semibold text-red-500 bg-red-100 px-3 py-0.5 rounded-full",children:"Inactive"})})}),e.jsxs("td",{className:"px-4 py-2 text-right border-b",children:[e.jsx("button",{onClick:()=>u(t),className:"text-blue-600 underline hover:text-blue-800",children:"Edit"}),e.jsx("button",{onClick:()=>v(t.id),className:"ml-4 text-red-600 underline hover:text-red-800",children:"Delete"})]})]},t.id))})]})})]})}),e.jsx(y,{show:h,onClose:n,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-bold",children:s?"Edit Interval":"Create New Interval"}),a.name&&e.jsx("p",{className:"text-red-600",children:a.name}),a.amount&&e.jsx("p",{className:"text-red-600",children:a.status}),e.jsxs("form",{onSubmit:g,className:"mt-4",children:[e.jsxs("label",{className:"block mb-2",children:["Interval Time (Month):",e.jsx("input",{type:"number",value:i.name,onChange:t=>c("name",t.target.value),className:"block w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),e.jsxs("label",{className:"flex flex-col mb-2",children:["Status:",e.jsxs("label",{className:"inline-flex items-center mb-5 mt-2 cursor-pointer",children:[e.jsx("input",{onChange:t=>c(l=>({...l,status:t.target.checked})),type:"checkbox",checked:!!i.status,className:"sr-only peer"}),e.jsx("div",{className:"relative w-9 h-5 bg-gray-200 peer-focus:ring-0 peer-focus:ring-offset-0 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsx("button",{type:"submit",className:"p-2 mt-4 mr-2 text-white bg-blue-600 rounded-md",children:s?"Update Interval":"Create Interval"}),e.jsx("button",{onClick:n,type:"button",className:"p-2 mt-2 text-white bg-red-600 rounded-md",children:"Close"})]})]})})]})};export{T as default};
