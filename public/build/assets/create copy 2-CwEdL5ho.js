import{W as w,r as l,j as e}from"./app-bBQMqR6O.js";import{N as v}from"./notyf.min-DLu_xjpT.js";import{A as _}from"./AdminLayout-BHjzgd9T.js";import"./Dropdown-BP-MPy4X.js";import"./index-BtE-ENE6.js";import"./index-CYmrYT0Q.js";const r=new v,P=({client_idf2:b})=>{const{data:n,setData:h,post:g,processing:u,errors:s}=w({product_id:b.value,item_name:"",model_no:"",brand:"",product_category:"male",price:"",unit:"",image:"",product_desc:""}),[d,c]=l.useState([]),[x,y]=l.useState(!1),[i,p]=l.useState("");l.useEffect(()=>{(async()=>{try{const m=await(await fetch("/brands")).json();c(m)}catch{r.error("Failed to load brands")}})()},[]);const o=t=>{h(t.target.name,t.target.value)},f=t=>{t.preventDefault(),g("/Product-List/",{onSuccess:()=>{r.success("Product added successfully!")},onError:()=>{r.error("Failed to add product. Please check your inputs.")}})},j=async()=>{if(i)try{const t=await fetch("/brands",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({name:i})});if(t.ok){const a=await t.json();c([...d,a]),p(""),r.success("Brand added successfully")}else r.error("Failed to add brand")}catch{r.error("Error adding brand")}},N=async t=>{try{(await fetch(`/brands/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).ok?(c(d.filter(m=>m.cat_id!==t)),r.success("Brand removed successfully")):r.error("Failed to delete brand")}catch{r.error("Error deleting brand")}};return e.jsx(_,{children:e.jsxs("div",{className:"max-w-4xl p-8 mx-auto bg-white rounded-lg shadow-md",children:[e.jsx("h2",{className:"mb-6 text-2xl font-bold text-gray-800",children:"Add Client"}),e.jsx("h2",{className:"mb-1 text-2xl font-bold text-gray-600",children:"Personal Information"}),e.jsxs("form",{onSubmit:f,className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Product ID"}),e.jsx("input",{type:"text",name:"product_id",readOnly:!0,value:n.product_id,onChange:o,className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Enter Product Id"}),s.product_id&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.product_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Item Name"}),e.jsx("input",{type:"text",name:"item_name",value:n.item_name,onChange:o,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter First Name"}),s.item_name&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.item_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Model Number"}),e.jsx("input",{type:"text",name:"model_no",value:n.model_no,onChange:o,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter Middle Name"}),s.model_no&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.model_no})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Brand"}),e.jsxs("select",{name:"brand",value:n.brand,onChange:o,className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"",children:"Select a brand"}),d.map(t=>e.jsx("option",{value:t.title,children:t.title},t.cat_id))]}),s.brand&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:s.brand}),e.jsx("button",{type:"button",onClick:()=>y(!x),className:"mt-2 px-4 py-2 text-sm text-white bg-blue-600 rounded-lg",children:"Manage Brands"}),x&&e.jsxs("div",{className:"mt-4 p-4 border border-gray-300 rounded-lg bg-gray-50",children:[e.jsx("h3",{className:"mb-2 font-bold",children:"Manage Brands"}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"text",value:i,onChange:t=>p(t.target.value),placeholder:"New Brand Name",className:"flex-grow px-2 py-1 border border-gray-300 rounded-lg"}),e.jsx("button",{type:"button",onClick:j,className:"ml-2 px-3 py-1 text-sm text-white bg-green-600 rounded-lg",children:"Add"})]}),e.jsx("ul",{children:d.map(t=>e.jsxs("li",{className:"flex items-center justify-between py-1",children:[e.jsx("span",{children:t.title}),e.jsx("button",{type:"button",onClick:()=>N(t.cat_id),className:"px-2 py-1 text-sm text-white bg-red-600 rounded-lg",children:"Delete"})]},t.cat_id))})]})]}),e.jsx("div",{className:"col-span-1 md:col-span-2",children:e.jsx("button",{type:"submit",disabled:u,className:"px-6 py-3 text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:u?"Processing...":"Add Client"})})]})]})})};export{P as default};
