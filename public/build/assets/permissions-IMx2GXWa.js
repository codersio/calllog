import{r as u,W as N,j as s}from"./app-BV8Hs2DA.js";import{A as C}from"./AdminLayout-7Wm0VRsv.js";import"./Dropdown-4iDllGMy.js";import"./index-B8hqPStr.js";import"./index-BfhOz7Dm.js";const S=({user:_,user_type:k,permissions:d,notif:y})=>{const[x,h]=u.useState({}),{data:o,setData:m,post:f,errors:p}=N({role_name:"",permissions:[]});u.useEffect(()=>{j(d)},[d]);const j=e=>{if(e&&e.length>0){const a=e.reduce((t,c)=>{const i=c.name.split("_"),l=i[0],n=i.slice(1).join("_");return t[n]||(t[n]=[]),t[n].push({id:c.id,action:l}),t},{}),r=Object.keys(a).reduce((t,c)=>(t[c]=a[c].sort((i,l)=>{const n=["view","create","edit","delete"];return n.indexOf(i.action)-n.indexOf(l.action)}),t),{});h(r)}},v=e=>{m("permissions",o.permissions.includes(e)?o.permissions.filter(a=>a!==e):[...o.permissions,e])},g=e=>{m(e.target.name,e.target.value)},b=e=>{e.preventDefault(),f("/roles-permission-store",{onSuccess:()=>{console.log("Permissions saved successfully!")},onError:()=>{console.log("Error saving permissions.")}})};return s.jsxs(C,{children:[s.jsx("div",{className:"px-[9rem] form mt-9",children:s.jsxs("div",{className:"form-group",children:[s.jsx("input",{type:"text",placeholder:"Role Name",className:"w-full rounded-md",name:"role_name",value:o.role_name,onChange:g}),p.role_name&&s.jsx("div",{className:"invalid-feedback",children:p.role_name})]})}),s.jsxs("div",{className:"px-[9rem] form-group",children:[Object.entries(x).map(([e,a])=>s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("h3",{className:"w-[10rem]",children:e.charAt(0).toUpperCase()+e.slice(1)})," ",s.jsx("div",{style:{marginLeft:"20px"},className:"flex space-x-[4rem]",children:a.map(r=>s.jsxs("div",{className:"space-x-2",children:[s.jsx("input",{type:"checkbox",name:"permissions[]",value:r.id,checked:o.permissions.includes(r.id),onChange:()=>v(r.id)}),s.jsx("label",{children:r.action.charAt(0).toUpperCase()+r.action.slice(1)})," "]},r.id))})]},e)),s.jsx("button",{onClick:b,type:"submit",className:"p-2 mt-4 text-white rounded btn bg-slate-900",children:"Save Permissions"})]})]})};export{S as default};
